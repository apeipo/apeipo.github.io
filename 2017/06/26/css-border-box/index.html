<!DOCTYPE html><html><head><meta charset="utf-8"><title>CSS的box-sizing属性引起的一个问题 | linxianlong的博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="CSS,"><meta name="description" content="整理一个box-sizing引起的样式问题。问题在使用腾讯地图的api展示地图时，发现地图的比例尺展示空白了。如图：，正常应该是：Chrome下，元素的盒子模型如下：关键的几个css样式：元素的border-color设置了白色，因此元素实际要展示的颜色应该是由background-color决定的，但是从盒子上可以看出，元素内容部分(content)的高度为0，导致元素没有展示实际的黑色。元素的"><meta name="keywords" content="CSS"><meta property="og:type" content="article"><meta property="og:title" content="CSS的box-sizing属性引起的一个问题"><meta property="og:url" content="http://longlog.me/2017/06/26/css-border-box/index.html"><meta property="og:site_name" content="linxianlong的博客"><meta property="og:description" content="整理一个box-sizing引起的样式问题。问题在使用腾讯地图的api展示地图时，发现地图的比例尺展示空白了。如图：，正常应该是：Chrome下，元素的盒子模型如下：关键的几个css样式：元素的border-color设置了白色，因此元素实际要展示的颜色应该是由background-color决定的，但是从盒子上可以看出，元素内容部分(content)的高度为0，导致元素没有展示实际的黑色。元素的"><meta property="og:locale" content="default"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984499285621.jpg"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984502329840.jpg"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984500426038.jpg"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984501217132.jpg"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984486313104.gif"><meta property="og:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984595662080.jpg"><meta property="og:updated_time" content="2018-08-06T12:12:41.816Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="CSS的box-sizing属性引起的一个问题"><meta name="twitter:description" content="整理一个box-sizing引起的样式问题。问题在使用腾讯地图的api展示地图时，发现地图的比例尺展示空白了。如图：，正常应该是：Chrome下，元素的盒子模型如下：关键的几个css样式：元素的border-color设置了白色，因此元素实际要展示的颜色应该是由background-color决定的，但是从盒子上可以看出，元素内容部分(content)的高度为0，导致元素没有展示实际的黑色。元素的"><meta name="twitter:image" content="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984499285621.jpg"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/styles.css"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?bec693dc99391bbe29dd7310e3fff81a";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head></html><body><div class="post-header LEFT"><div class="toolbox"><ul class="list-toolbox"><li class="item-toolbox"><a class="CIRCLE" href="/">首页</a></li><li class="item-toolbox"><a class="CIRCLE" href="/categories/">分类</a></li><li class="item-toolbox"><a class="CIRCLE" href="/tags/">标签</a></li><li class="item-toolbox"><a class="CIRCLE" href="/2017/03/28/MY-2017/">2017</a></li><li class="item-toolbox"><a class="CIRCLE" href="/2018/08/06/2018-Target/">2018</a></li><li class="item-toolbox"><a class="CIRCLE" href="/link/">友链</a></li><li class="item-toolbox"><a class="CIRCLE" href="/about/">关于</a></li></ul></div><div class="toolbox tool-vertical" id="tool-vertical"><ul class="list-toolbox list-vertical"><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/">首页</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/categories/">分类</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/tags/">标签</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/2017/03/28/MY-2017/">2017</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/2018/08/06/2018-Target/">2018</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/link/">友链</a></li><li class="item-toolbox"><a class="CIRCLE VERTICAL" href="/about/">关于</a></li></ul></div><script type="text/javascript">function getStyle(e){return void 0===e.currentStyle?getComputedStyle(e):e.currentStyle}window.onscroll=function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t=document.getElementsByClassName("toolbox")[0],l=document.getElementById("tool-vertical"),o=getStyle(l).display,n=document.getElementsByClassName("CIRCLE VERTICAL");if(60<=e&&"none"==o){l.style.display="block",t.style.display="none";for(var s=0;s<n.length;s++)n[s].setAttribute("class","CIRCLE VERTICAL")}if(e<60&&"block"==o)for(t.style.display="block",setTimeout("document.getElementById('tool-vertical').style.display = 'none'",600),s=0;s<n.length;s++)n[s].setAttribute("class",n[s].className+" a-vertical")}</script></div><div id="toc" class="toc-article"><strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#问题"><span class="toc-text">问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#盒子模型"><span class="toc-text">盒子模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#box-sizing"><span class="toc-text">box-sizing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#content-box"><span class="toc-text">content-box</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#border-box"><span class="toc-text">border-box</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他问题"><span class="toc-text">其他问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#border-box，如果border-padding超过了width会怎么样？"><span class="toc-text">border-box，如果border+padding超过了width会怎么样？</span></a></li></ol></li></ol></div><div class="content-post LEFT"><article id="post-css-border-box" class="article article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="post-title">CSS的box-sizing属性引起的一个问题</h1><div class="article-meta"><span>2017-06-26</span> <span>| </span><span class="article-author">Linxianlong</span> <span>| </span><span class="article-category"><a class="article-category-link" href="/categories/前端/">前端</a></span></div></header><div class="article-content"><p>整理一个box-sizing引起的样式问题。</p><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>在使用腾讯地图的api展示地图时，发现地图的比例尺展示空白了。<br>如图：<img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984499285621.jpg" alt="-w100">，正常应该是：<img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984502329840.jpg" alt="-w100"></p><p>Chrome下，元素的盒子模型如下：<br><img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984500426038.jpg" alt="-w200"><br>关键的几个css样式：<br><img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984501217132.jpg" alt="-w200"><br>元素的border-color设置了白色，因此元素实际要展示的颜色应该是由background-color决定的，但是从盒子上可以看出，<strong>元素内容部分(content)的高度为0</strong>，导致元素没有展示实际的黑色。<br>元素的样式设置了height为2px，样式都是在style属性中定义，不存在被覆盖的情况，为什么实际高度是0呢？看着好像高度被border占了？<br>先回顾下CSS的盒子模型。</p><h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><p>如下图，盒子模型描述了一个元素在页面中<strong>占用的空间</strong>。注意，<strong>占用空间 != 高度X宽度</strong>。<br><strong>默认情况下，当你指定一个CSS元素的宽度和高度属性时，你只是设置内容区域（下图中的content）的宽度和高度</strong>。一个元素实际占用的空间还需要加上padding、border和margin。<br><img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984486313104.gif" alt=""></p><p>回到上文中的问题，style中设定了div的高度为2，也就是上图中Content区域的高度为2。但是Chrome中实际渲染出来Content的高度为0。也就是盒子模型发生了变化？？是有什么属性会改变浏览器的盒子模型计算高度、宽度的方式么？<br>是的，这个属性就是box-sizing属性。</p><h2 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a>box-sizing</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/box-sizing" target="_blank" rel="noopener">MDN文档链接</a><br>box-sizing 属性用于更改用于更改CSS盒子模型计算元素宽度和高度的方式。<br>该属性有两个取值，<strong>content-box</strong>和<strong>border-box</strong></p><h3 id="content-box"><a href="#content-box" class="headerlink" title="content-box"></a>content-box</h3><p>默认值，标准盒子模型。 width与height只包括Content的宽和高， 不包括边框（border）、内边距（padding）、外边距（margin）。<br>如一个元素的width=20px，border=10px。则在浏览器中实际的<strong>占用宽度</strong>是40px;</p><h3 id="border-box"><a href="#border-box" class="headerlink" title="border-box"></a>border-box</h3><p>width 和 height 属性包括Content，Padding和Border，不包括Margin。<br>如一个元素的width=20px，border=10px。则在浏览器中实际的占用宽度是20px。<br>注意，在这种情况下（width=border+padding），<strong>则会挤压Content的空间</strong>，也就是Content的width=0。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>至此，问题原因应该明朗了，查看出问题的div的box-sizing属性，果然是border-box（页面用了bootstrap.css，将全局的div的box-sizing都设置成了border-box）。<br>解决方案也很简单，在页面里增加css样式，将包含地图控件下所有div的box-sizing属性设置为content-box。</p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><h3 id="border-box，如果border-padding超过了width会怎么样？"><a href="#border-box，如果border-padding超过了width会怎么样？" class="headerlink" title="border-box，如果border+padding超过了width会怎么样？"></a>border-box，如果border+padding超过了width会怎么样？</h3><p>先说结果：这种情况下，Content区域会被挤压为0，元素实际占用的宽度会是border+padding。<br>例如 width:20px; padding:10px; border: 1px; box-sizing:border-box; 则元素的占用宽度为22，Content区域宽度为0。其盒子模型如下：<br><img src="http://7xrhmq.com1.z0.glb.clouddn.com/2017-06-26-14984595662080.jpg" alt="-w200"></p></div></article><section class="disqus-comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></div><script type="text/javascript">!function(){var t=document.getElementsByTagName("article")[0];if(null!=t){imgs=t.getElementsByTagName("img");for(var e=0;e<imgs.length;e++)img=imgs[e],width=parseInt(img.getAttribute("alt").replace("-w","")),0<width&&img.setAttribute("style","width:"+width+"px")}}()</script><script>var disqus_shortname="apeipo",disqus_url="http://longlog.me/2017/06/26/css-border-box/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></body>